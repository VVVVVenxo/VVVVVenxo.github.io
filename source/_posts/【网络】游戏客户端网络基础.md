---
title: 【网络】游戏客户端网络基础
toc: true
categories:
  - 技术笔记
  - 网络
cover: /img/covers/game.jpg
date: 2025-06-05
tags:
  - TCP
  - UDP
  - Socket
  - Mirror
description: 游戏客户端网络开发入门：理解 OSI/TCP-IP 网络模型、TCP 与 UDP 的区别，以及 Socket 编程基础。
---

> Mirror 和 NetCode 等网络框架的双端代码写在一起，初期理解会比较困难。本文从网络模型基础开始，帮助理解游戏网络开发的核心概念。

---

## 网络模型

### OSI 七层模型

OSI（开放系统互连）是理论参考模型，将网络通信分为 7 层：

| 层级 | 名称 | 功能 | 协议/设备 |
|------|------|------|-----------|
| 7 | 应用层 | 用户接口 | HTTP, FTP |
| 6 | 表示层 | 数据格式转换、加密 | SSL, JPEG |
| 5 | 会话层 | 建立/管理会话 | NetBIOS |
| 4 | 传输层 | 端到端传输 | **TCP, UDP** |
| 3 | 网络层 | 路由寻址 | IP, 路由器 |
| 2 | 数据链路层 | 帧传输 | MAC, 交换机 |
| 1 | 物理层 | 比特传输 | 网线, 光纤 |

### TCP/IP 五层模型

TCP/IP 是实际使用的网络模型，简化了 OSI：

| 层级 | 名称 | 对应 OSI |
|------|------|----------|
| 5 | 应用层 | 应用层 + 表示层 + 会话层 |
| 4 | 传输层 | 传输层 |
| 3 | 网络层 | 网络层 |
| 2 | 数据链路层 | 数据链路层 |
| 1 | 物理层 | 物理层 |

### 游戏开发关注点

游戏网络开发主要关注**传输层**：

- **TCP**：可靠传输，适合登录、聊天、交易
- **UDP**：低延迟，适合实时战斗、位置同步

---

## 传输协议

### UDP

- **无连接**：不需要建立连接
- **大小限制**：数据包控制在 64KB 以内
- **不可靠传输**：不保证数据到达
- **速度较快**：由于无需连接，传输效率高

### TCP

- **面向连接**：需要三次握手建立连接、四次挥手断开连接
- **可靠传输**：保证数据按序到达
- **传输效率较慢**：连接开销较大

## Socket 套接字

Socket 是计算机之间进行通信的一系列协议接口。如果要进行网络开发，就需要使用 Socket。

本质上，Socket 是封装了 TCP/IP 协议的 API。